{"version":3,"file":"detector.min.js","sources":["../../src/extension-detector/detector.js"],"sourcesContent":["/**\n * @fileoverview Main extension detector with metrics manager\n * @module quizaccess_cheatdetect/extension-detector/detector\n * @copyright 2025 CBlue SRL <support@cblue.be>\n * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n * @since 1.0.0\n */\n\ndefine([\n    'quizaccess_cheatdetect/extension-detector/config',\n    'quizaccess_cheatdetect/extension-detector/browser',\n    'quizaccess_cheatdetect/extension-detector/shadow',\n    'quizaccess_cheatdetect/shared/utils',\n    'quizaccess_cheatdetect/extension-detector/metrics-manager'\n], function(Config, Browser, Shadow, SharedUtils, MetricsManager) {\n    'use strict';\n\n    /**\n     * @typedef {Object} ExtensionDetectorState\n     * @property {Set<string>} detectedExtensions - Detected extensions\n     * @property {Map<string, number>} extensionPaths - Extension paths with timestamp\n     * @property {boolean} isRunning - Running state\n     */\n\n    /**\n     * Main extension detector constructor\n     * @class ExtensionDetector\n     * @throws {Error} If browser is not supported\n     * @example\n     * const detector = new ExtensionDetector();\n     * detector.start();\n     * @since 1.0.0\n     */\n    var ExtensionDetector = function() {\n        var self = this;\n\n        this.browserHandler = new Browser.BrowserHandler();\n        this.shadowMonitor = new Shadow.ShadowMonitor(function(extensionKey, extension, method) {\n            self._onExtensionDetected(extensionKey, extension, method);\n        });\n\n        // Simplified metrics manager\n        this.metricsManager = new MetricsManager.MetricsManager();\n\n        // Connect metrics manager to shadow monitor\n        this.shadowMonitor.setMetricsManager(this.metricsManager);\n\n        // Connect callback for extension ID detection\n        this.shadowMonitor.setExtensionIdDetectedCallback(function(extensionKey, extensionId) {\n            // Scan DOM to remove all elements with this ID\n            self._scanAndRemoveElementsWithExtensionId(extensionKey, extensionId);\n        });\n\n        // Detection state\n        this.detectedExtensions = new Set();\n        this.isRunning = false;\n    };\n\n    /**\n     * Start the detection system\n     * @memberof ExtensionDetector\n     * @function start\n     * @throws {Error} If startup fails\n     * @example\n     * detector.start();\n     * @since 1.0.0\n     */\n    ExtensionDetector.prototype.start = function() {\n        if (this.isRunning) {\n            if (Config.SETTINGS.enableLogging) {\n                // eslint-disable-next-line no-console\n                console.warn('ðŸ§© Extension Detector: Already running');\n            }\n            return;\n        }\n\n        this.isRunning = true;\n\n        try {\n            // Reset state\n            this._resetState();\n\n            // Start Shadow DOM monitoring\n            this.shadowMonitor.start();\n\n        } catch (error) {\n            // eslint-disable-next-line no-console\n            console.error('ðŸ§© Extension Detector: Startup failed', error);\n            this.isRunning = false;\n            throw error;\n        }\n    };\n\n    /**\n     * Stop the detection system\n     * @memberof ExtensionDetector\n     * @function stop\n     * @example\n     * detector.stop();\n     * @since 1.0.0\n     */\n    ExtensionDetector.prototype.stop = function() {\n        if (!this.isRunning) {\n            return;\n        }\n\n        if (Config.SETTINGS.enableLogging) {\n            // eslint-disable-next-line no-console\n            console.log('ðŸ§© Extension Detector: Stopping detection system');\n        }\n        this.isRunning = false;\n\n        // Stop components\n        this.shadowMonitor.stop();\n        this.browserHandler.cleanup();\n\n        if (Config.SETTINGS.enableLogging) {\n            // eslint-disable-next-line no-console\n            console.log('ðŸ§© Extension Detector: Detection system stopped');\n        }\n    };\n\n    /**\n     * Restart the detection system\n     * @memberof ExtensionDetector\n     * @function restart\n     * @example\n     * detector.restart();\n     * @since 1.0.0\n     */\n    ExtensionDetector.prototype.restart = function() {\n        var self = this;\n        if (Config.SETTINGS.enableLogging) {\n            // eslint-disable-next-line no-console\n            console.log('ðŸ§© Extension Detector: Restarting system');\n        }\n        this.stop();\n        setTimeout(function() {\n            self.start();\n        }, 1000);\n    };\n\n    /**\n     * Handle extension detection\n     * @memberof ExtensionDetector\n     * @function _onExtensionDetected\n     * @param {string} extensionKey - Extension key\n     * @param {Object} extension - Extension configuration\n     * @param {string} method - Detection method used\n     * @private\n     * @since 1.0.0\n     */\n    ExtensionDetector.prototype._onExtensionDetected = function(extensionKey, extension, method) {\n        // Avoid duplicate detections\n        if (this.detectedExtensions.has(extensionKey)) {\n            return;\n        }\n\n        this.detectedExtensions.add(extensionKey);\n\n        if (Config.SETTINGS.enableLogging) {\n            // eslint-disable-next-line no-console\n            console.log('ðŸš¨ Extension Detector: ' + extension.name + ' detected via ' + method);\n        }\n\n        // Log detection event\n        if (Config.SETTINGS.enableLogging) {\n            this._logDetection(extensionKey, extension.name, method);\n        }\n    };\n\n    /**\n     * Scan and remove all DOM elements containing a specific extension ID\n     * @memberof ExtensionDetector\n     * @function _scanAndRemoveElementsWithExtensionId\n     * @param {string} extensionKey - Extension key\n     * @param {string} extensionId - Extension ID to search for\n     * @private\n     * @since 1.0.0\n     */\n    ExtensionDetector.prototype._scanAndRemoveElementsWithExtensionId = function(extensionKey, extensionId) {\n        if (!Config.SETTINGS.removeDetectedElements) {\n            return;\n        }\n\n        if (Config.SETTINGS.enableLogging) {\n            // eslint-disable-next-line no-console\n            console.log('ðŸ§© Extension Detector: Scanning DOM to remove all elements with extension ID: ' +\n                extensionId);\n        }\n\n        var removedCount = 0;\n\n        // Scan main DOM\n        removedCount += this._scanElementsForExtensionId(document.body, extensionKey, extensionId);\n\n        // Scan all existing Shadow DOMs\n        var allElements = document.querySelectorAll('*');\n        for (var i = 0; i < allElements.length; i++) {\n            var element = allElements[i];\n            if (element.shadowRoot) {\n                removedCount += this._scanShadowRootForExtensionId(element.shadowRoot, extensionKey, extensionId);\n            }\n        }\n\n        if (Config.SETTINGS.enableLogging) {\n            // eslint-disable-next-line no-console\n            console.log('ðŸ§© Extension Detector: ' + removedCount + ' elements removed with extension ID ' + extensionId);\n        }\n    };\n\n    /**\n     * Scan an element and its children for an extension ID and remove them\n     * @memberof ExtensionDetector\n     * @function _scanElementsForExtensionId\n     * @param {Element} rootElement - Root element to scan\n     * @param {string} extensionKey - Extension key\n     * @param {string} extensionId - Extension ID to search for\n     * @returns {number} Number of elements removed\n     * @private\n     * @since 1.0.0\n     */\n    ExtensionDetector.prototype._scanElementsForExtensionId = function(rootElement, extensionKey, extensionId) {\n        if (!rootElement) {\n            return 0;\n        }\n\n        var removedCount = 0;\n        var elementsToRemove = [];\n\n        // Find all elements containing the extension ID\n        var allElements = rootElement.querySelectorAll('*');\n        for (var i = 0; i < allElements.length; i++) {\n            var element = allElements[i];\n\n            // Security: never remove body, html, head\n            if (element === document.body || element === document.documentElement ||\n                element.tagName === 'BODY' || element.tagName === 'HTML' || element.tagName === 'HEAD') {\n                continue;\n            }\n\n            if (this._elementContainsExtensionId(element, extensionId)) {\n                elementsToRemove.push(element);\n            }\n        }\n\n        // Remove found elements\n        for (var j = 0; j < elementsToRemove.length; j++) {\n            var elementToRemove = elementsToRemove[j];\n            try {\n                // Log element before removal if logging enabled\n                if (Config.SETTINGS.enableLogging) {\n                    var elementInfo = {\n                        tag: elementToRemove.tagName,\n                        id: elementToRemove.id || '(no id)',\n                        class: elementToRemove.className || '(no class)',\n                        html: elementToRemove.outerHTML.substring(0, 200) + '...'\n                    };\n                    // eslint-disable-next-line no-console\n                    console.log('ðŸ§© Extension Detector:   â†’ Element #' + (j + 1) + ' removed:', elementInfo);\n                }\n\n                if (elementToRemove.parentNode) {\n                    elementToRemove.parentNode.removeChild(elementToRemove);\n                    removedCount++;\n                } else if (elementToRemove.remove) {\n                    elementToRemove.remove();\n                    removedCount++;\n                }\n            } catch (error) {\n                // Silent failure\n            }\n        }\n\n        return removedCount;\n    };\n\n    /**\n     * Scan a Shadow Root for an extension ID and remove elements\n     * @memberof ExtensionDetector\n     * @function _scanShadowRootForExtensionId\n     * @param {ShadowRoot} shadowRoot - Shadow Root to scan\n     * @param {string} extensionKey - Extension key\n     * @param {string} extensionId - Extension ID to search for\n     * @returns {number} Number of elements removed\n     * @private\n     * @since 1.0.0\n     */\n    ExtensionDetector.prototype._scanShadowRootForExtensionId = function(shadowRoot, extensionKey, extensionId) {\n        if (!shadowRoot) {\n            return 0;\n        }\n\n        var removedCount = 0;\n        var elementsToRemove = [];\n\n        try {\n            var allElements = shadowRoot.querySelectorAll('*');\n            for (var i = 0; i < allElements.length; i++) {\n                var element = allElements[i];\n\n                if (this._elementContainsExtensionId(element, extensionId)) {\n                    elementsToRemove.push(element);\n                }\n\n                // Recursively scan nested Shadow DOMs\n                if (element.shadowRoot) {\n                    removedCount += this._scanShadowRootForExtensionId(element.shadowRoot, extensionKey, extensionId);\n                }\n            }\n\n            // Remove found elements\n            for (var j = 0; j < elementsToRemove.length; j++) {\n                var elementToRemove = elementsToRemove[j];\n                try {\n                    // Log element before removal if logging enabled\n                    if (Config.SETTINGS.enableLogging) {\n                        var elementInfo = {\n                            tag: elementToRemove.tagName,\n                            id: elementToRemove.id || '(no id)',\n                            class: elementToRemove.className || '(no class)',\n                            html: elementToRemove.outerHTML.substring(0, 200) + '...',\n                            location: 'Shadow DOM'\n                        };\n                        // eslint-disable-next-line no-console\n                        console.log('ðŸ§© Extension Detector:   â†’ Element removed from Shadow DOM:', elementInfo);\n                    }\n\n                    if (elementToRemove.parentNode) {\n                        elementToRemove.parentNode.removeChild(elementToRemove);\n                        removedCount++;\n                    } else if (elementToRemove.remove) {\n                        elementToRemove.remove();\n                        removedCount++;\n                    }\n                } catch (error) {\n                    // Silent failure\n                }\n            }\n        } catch (error) {\n            // Silent failure\n        }\n\n        return removedCount;\n    };\n\n    /**\n     * Check if an element contains a specific extension ID\n     * @memberof ExtensionDetector\n     * @function _elementContainsExtensionId\n     * @param {Element} element - Element to check\n     * @param {string} extensionId - Extension ID to search for\n     * @returns {boolean} True if element contains the extension ID\n     * @private\n     * @since 1.0.0\n     */\n    ExtensionDetector.prototype._elementContainsExtensionId = function(element, extensionId) {\n        if (!element || !extensionId) {\n            return false;\n        }\n\n        var outerHTML = element.outerHTML;\n        var shadowHTML = element.shadowRoot ? element.shadowRoot.innerHTML : '';\n        var combinedHTML = outerHTML + shadowHTML;\n\n        // Search for extension ID in HTML\n        return combinedHTML.indexOf(extensionId) !== -1;\n    };\n\n    /**\n     * Reset detection state\n     * @memberof ExtensionDetector\n     * @function _resetState\n     * @private\n     * @since 1.0.0\n     */\n    ExtensionDetector.prototype._resetState = function() {\n        this.detectedExtensions.clear();\n        this.shadowMonitor.reset();\n        this.metricsManager.reset();\n    };\n\n    /**\n     * Get detection statistics with simplified metrics\n     * @memberof ExtensionDetector\n     * @function getStatistics\n     * @returns {Object} Detection statistics\n     * @property {number} totalDetections - Total number of detections\n     * @property {number} uniquePaths - Number of unique paths\n     * @property {number} sessionDetections - Session detections\n     * @property {string[]} detectedExtensionsList - List of detected extensions\n     * @property {Object|null} lastDetection - Last detection\n     * @property {Object} metricsData - Metrics data\n     * @example\n     * const stats = detector.getStatistics();\n     * console.log('Detected extensions:', stats.detectedExtensionsList);\n     * @since 1.0.0\n     */\n    ExtensionDetector.prototype.getStatistics = function() {\n        var sessionDetections = [];\n        try {\n            sessionDetections = JSON.parse(sessionStorage.getItem('extensionDetections') || '[]');\n        } catch (error) {\n            if (Config.SETTINGS.enableLogging) {\n                // eslint-disable-next-line no-console\n                console.warn('ðŸ§© Extension Detector: Unable to read session detections', error);\n            }\n        }\n\n        return {\n            totalDetections: this.detectedExtensions.size,\n            sessionDetections: sessionDetections.length,\n            detectedExtensionsList: Array.from(this.detectedExtensions),\n            lastDetection: sessionDetections.length > 0 ? sessionDetections[sessionDetections.length - 1] : null,\n            metricsData: this.metricsManager.getData()\n        };\n    };\n\n    /**\n     * Export metrics as JSON\n     * @memberof ExtensionDetector\n     * @function exportMetricsAsJSON\n     * @returns {string} JSON string of metrics\n     * @example\n     * const jsonMetrics = detector.exportMetricsAsJSON();\n     * const metrics = JSON.parse(jsonMetrics);\n     * @since 1.0.0\n     */\n    ExtensionDetector.prototype.exportMetricsAsJSON = function() {\n        return this.metricsManager.exportMetricsAsJSON();\n    };\n\n    /**\n     * Add support for a new extension\n     * @memberof ExtensionDetector\n     * @function addExtensionSupport\n     * @param {string} extensionKey - Extension key\n     * @param {string} extensionName - Extension name\n     * @example\n     * detector.addExtensionSupport('newExt', 'New Extension');\n     * @since 1.0.0\n     */\n    ExtensionDetector.prototype.addExtensionSupport = function(extensionKey, extensionName) {\n        if (Config.SETTINGS.enableLogging) {\n            // eslint-disable-next-line no-console\n            console.log('ðŸ§© Extension Detector: Support added for extension: ' + extensionName);\n        }\n    };\n\n    /**\n     * Get extension configuration\n     * @memberof ExtensionDetector\n     * @function getExtensionConfig\n     * @param {string} extensionKey - Extension key\n     * @returns {Object|null} Extension configuration\n     * @example\n     * const config = detector.getExtensionConfig('crowdly');\n     * @since 1.0.0\n     */\n    ExtensionDetector.prototype.getExtensionConfig = function(extensionKey) {\n        return Config.getExtension(extensionKey);\n    };\n\n    /**\n     * Cleanup resources\n     * @memberof ExtensionDetector\n     * @function cleanup\n     * @example\n     * detector.cleanup();\n     * @since 1.0.0\n     */\n    ExtensionDetector.prototype.cleanup = function() {\n        if (Config.SETTINGS.enableLogging) {\n            // eslint-disable-next-line no-console\n            console.log('ðŸ§© Extension Detector: Cleaning up resources');\n        }\n\n        this.stop();\n    };\n\n    /**\n     * Log a detection event\n     * @memberof ExtensionDetector\n     * @function _logDetection\n     * @param {string} extensionKey - Extension key\n     * @param {string} extensionName - Extension name\n     * @param {string} method - Detection method\n     * @private\n     * @since 1.0.0\n     */\n    ExtensionDetector.prototype._logDetection = function(extensionKey, extensionName, method) {\n        if (!Config.SETTINGS.enableLogging) {\n            return;\n        }\n\n        var event = {\n            timestamp: SharedUtils.generateTimestamp().unix,\n            extension: extensionKey,\n            extensionName: extensionName,\n            method: method,\n            url: window.location.href,\n            userAgent: navigator.userAgent\n        };\n\n        try {\n            var history = JSON.parse(sessionStorage.getItem('extensionDetections') || '[]');\n            history.push(event);\n            sessionStorage.setItem('extensionDetections', JSON.stringify(history));\n        } catch (error) {\n            // eslint-disable-next-line no-console\n            console.warn('ðŸ§© Extension Detector: Unable to save detection event', error);\n        }\n    };\n\n    return {\n        ExtensionDetector: ExtensionDetector\n    };\n});\n"],"names":["define","Config","Browser","Shadow","SharedUtils","MetricsManager","ExtensionDetector","self","this","browserHandler","BrowserHandler","shadowMonitor","ShadowMonitor","extensionKey","extension","method","_onExtensionDetected","metricsManager","setMetricsManager","setExtensionIdDetectedCallback","extensionId","_scanAndRemoveElementsWithExtensionId","detectedExtensions","Set","isRunning","prototype","start","SETTINGS","enableLogging","console","warn","_resetState","error","stop","log","cleanup","restart","setTimeout","has","add","name","_logDetection","removeDetectedElements","removedCount","_scanElementsForExtensionId","document","body","allElements","querySelectorAll","i","length","element","shadowRoot","_scanShadowRootForExtensionId","rootElement","elementsToRemove","documentElement","tagName","_elementContainsExtensionId","push","j","elementToRemove","elementInfo","tag","id","class","className","html","outerHTML","substring","parentNode","removeChild","remove","location","innerHTML","indexOf","clear","reset","getStatistics","sessionDetections","JSON","parse","sessionStorage","getItem","totalDetections","size","detectedExtensionsList","Array","from","lastDetection","metricsData","getData","exportMetricsAsJSON","addExtensionSupport","extensionName","getExtensionConfig","getExtension","event","timestamp","generateTimestamp","unix","url","window","href","userAgent","navigator","history","setItem","stringify"],"mappings":"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"}
/**
 * @fileoverview Gestionnaire de métriques ultra-simplifié pour la détection d'extensions
 * @module quizaccess_cheatdetect/extension-detector/metrics-manager
 * @copyright 2025 CBlue SRL <support@cblue.be>
 * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 * @since 1.0.0
 */
define("quizaccess_cheatdetect/extension-detector/metrics-manager",["quizaccess_cheatdetect/extension-detector/config","quizaccess_cheatdetect/shared/utils"],function(Config,SharedUtils){var MetricsManager=function(){this.data={extensions:{}},this._sessionStart=Date.now()};return MetricsManager.prototype.logDetectedElement=function(extensionKey,elementInfo){this._initExtension(extensionKey);var detectedElement={uid:Date.now().toString(36)+Math.random().toString(36).substring(2,7),extensionKey:extensionKey,timestamp:(new Date).toISOString()};for(var key in elementInfo)elementInfo.hasOwnProperty(key)&&(detectedElement[key]=elementInfo[key]);this.data.extensions[extensionKey].detectedElements.push(detectedElement)},MetricsManager.prototype._initExtension=function(extensionKey){this.data.extensions[extensionKey]||(this.data.extensions[extensionKey]={detectedElements:[]})},MetricsManager.prototype.exportMetricsAsJSON=function(){var exportData={timestamp:(new Date).toISOString(),extensionDetection:{}},self=this;return Object.keys(this.data.extensions).forEach(function(extensionKey){var ext=self.data.extensions[extensionKey],extensionConfig=Config.getExtension(extensionKey);exportData.extensionDetection[extensionKey]={name:extensionConfig?extensionConfig.name:extensionKey,detected:ext.detectedElements}}),JSON.stringify(exportData,null,2)},MetricsManager.prototype.reset=function(){this.data={extensions:{}},this._sessionStart=Date.now()},MetricsManager.prototype.getData=function(){return this.data},{MetricsManager:MetricsManager}});

//# sourceMappingURL=metrics-manager.min.js.map
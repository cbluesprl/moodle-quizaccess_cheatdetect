{"version":3,"file":"config.min.js","sources":["../../src/extension-detector/config.js"],"sourcesContent":["/**\n * @fileoverview Configuration pour la détection d'extensions\n * @module quizaccess_cheatdetect/extension-detector/config\n * @copyright 2025 CBlue SRL <support@cblue.be>\n * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n * @since 1.0.0\n */\n\ndefine([], function() {\n    'use strict';\n\n    /**\n     * @typedef {Object} ExtensionConfig\n     * @property {string} name - Nom affiché de l'extension\n     * @property {Object.<string, string>} extensionIds - IDs d'extension par navigateur\n     * @property {string[]} textKeywords - Mots-clés à rechercher dans le contenu texte\n     * @property {Object.<string, string[]>} files - Fichiers d'extension à vérifier\n     * @property {PatternConfig} patterns - Motifs d'attributs HTML\n     */\n\n    /**\n     * @typedef {Object} PatternConfig\n     * @property {string[]} ids - Motifs d'ID d'élément\n     * @property {string[]} classes - Motifs de classe CSS\n     */\n\n    /**\n     * @typedef {Object} SettingsConfig\n     * @property {number} shadowDOMCheckDelay - Délai de vérification du Shadow DOM (ms)\n     * @property {number} fileCheckTimeout - Timeout pour la vérification des fichiers (ms)\n     * @property {boolean} removeDetectedElements - Supprimer les éléments détectés\n     * @property {boolean} enableLogging - Activer les logs de débogage\n     */\n\n    /**\n     * Configurations de détection d'extensions\n     * @type {Object.<string, ExtensionConfig>}\n     * @readonly\n     */\n    var EXTENSIONS = {\n        crowdly: {\n            key: 'crowdly',\n            name: 'Crowdly – AI Study Assistant for Moodle',\n\n            // IDs d'extension par navigateur\n            extensionIds: {\n                chrome: 'idipjdgkafkkbklacjonnhkammdpigol',\n                edge: 'idipjdgkafkkbklacjonnhkammdpigol',\n            },\n\n            // Mots-clés à rechercher dans le contenu texte\n            textKeywords: ['crowdly.sh/', 'AI Magic'],\n\n            // Fichiers d'extension à vérifier avec validation de contenu\n            files: {\n                'src/styles.css': [\n                    '#page-question-preview',\n                    '#page-mod-quiz-edit'\n                ],\n                'manifest.json': [\n                    '\"name\"',\n                    '\"version\"'\n                ]\n            },\n\n            // Motifs d'attributs HTML\n            patterns: {\n                // Motifs d'ID d'élément\n                ids: ['crowd'],\n\n                // Motifs de classe CSS\n                classes: ['crowd']\n            }\n        }\n    };\n\n    /**\n     * Paramètres de détection\n     * @type {SettingsConfig}\n     * @readonly\n     */\n    var SETTINGS = {\n        shadowDOMCheckDelay: 1000,\n        fileCheckTimeout: 5000,\n        removeDetectedElements: true,\n        enableLogging: true\n    };\n\n    /**\n     * Expression régulière pour détecter les URLs d'extension multi-navigateur\n     * @type {RegExp}\n     * @readonly\n     */\n    var EXTENSION_URL_REGEX = /(chrome-extension:\\/\\/|moz-extension:\\/\\/)([a-z0-9-]+)/;\n\n    /**\n     * Obtient la configuration d'extension par clé\n     * @function getExtension\n     * @param {string} key - Clé de l'extension\n     * @returns {ExtensionConfig|null} Configuration de l'extension ou null si non trouvée\n     * @example\n     * const crowdlyConfig = getExtension('crowdly');\n     * console.log(crowdlyConfig.name); // \"Crowdly – AI Study Assistant for Moodle\"\n     * @since 1.0.0\n     */\n    var getExtension = function(key) {\n        return EXTENSIONS[key] || null;\n    };\n\n    /**\n     * Obtient toutes les extensions configurées\n     * @function getAllExtensions\n     * @returns {Array.<ExtensionConfig & {key: string}>} Tableau de toutes les extensions avec leur clé\n     * @example\n     * const allExtensions = getAllExtensions();\n     * allExtensions.forEach(ext => console.log(ext.key, ext.name));\n     * @since 1.0.0\n     */\n    var getAllExtensions = function() {\n        return Object.keys(EXTENSIONS).map(function(key) {\n            return Object.assign({ key: key }, EXTENSIONS[key]);\n        });\n    };\n\n    /**\n     * Obtient tous les IDs d'extension pour tous les navigateurs\n     * @function getExtensionId\n     * @param {string} extensionKey - Clé de l'extension\n     * @returns {Object.<string, string>|null} Objet avec les IDs par navigateur ou null\n     * @example\n     * const ids = getExtensionId('crowdly');\n     * // { chrome: \"abc123\", edge: \"abc123\", firefox: \"abc123\" }\n     * @since 1.0.0\n     */\n    var getExtensionId = function(extensionKey) {\n        var extension = getExtension(extensionKey);\n        if (!extension || !extension.extensionIds) return null;\n\n        return extension.extensionIds;\n    };\n\n    // API publique\n    return {\n        EXTENSIONS: EXTENSIONS,\n        SETTINGS: SETTINGS,\n        EXTENSION_URL_REGEX: EXTENSION_URL_REGEX,\n        getExtension: getExtension,\n        getAllExtensions: getAllExtensions,\n        getExtensionId: getExtensionId\n    };\n});"],"names":["define","EXTENSIONS","crowdly","key","name","extensionIds","chrome","edge","textKeywords","files","patterns","ids","classes","getExtension","SETTINGS","shadowDOMCheckDelay","fileCheckTimeout","removeDetectedElements","enableLogging","EXTENSION_URL_REGEX","getAllExtensions","Object","keys","map","assign","getExtensionId","extensionKey","extension"],"mappings":";;;;;;;AAQAA,OAAM,mDAAC,GAAI,WA+BP,IAAIC,WAAa,CACbC,QAAS,CACLC,IAAK,UACLC,KAAM,0CAGNC,aAAc,CACVC,OAAQ,mCACRC,KAAM,oCAIVC,aAAc,CAAC,cAAe,YAG9BC,MAAO,CACH,iBAAkB,CACd,yBACA,uBAEJ,gBAAiB,CACb,SACA,cAKRC,SAAU,CAENC,IAAK,CAAC,SAGNC,QAAS,CAAC,YAkClBC,aAAe,SAASV,KACxB,OAAOF,WAAWE,MAAQ,MAoC9B,MAAO,CACHF,WAAYA,WACZa,SA/DW,CACXC,oBAAqB,IACrBC,iBAAkB,IAClBC,wBAAwB,EACxBC,eAAe,GA4DfC,oBApDsB,yDAqDtBN,aAAcA,aACdO,iBA7BmB,WACnB,OAAOC,OAAOC,KAAKrB,YAAYsB,IAAI,SAASpB,KACxC,OAAOkB,OAAOG,OAAO,CAAErB,IAAKA,KAAOF,WAAWE,KAClD,IA2BAsB,eAdiB,SAASC,cAC1B,IAAIC,UAAYd,aAAaa,cAC7B,OAAKC,WAAcA,UAAUtB,aAEtBsB,UAAUtB,aAFiC,MAc1D"}